<?xml version="1.0"?>
<project name="flexdock" default="clean.compile.archive">
  
	<target name="init">
		<property name="project" value="${ant.project.name}"/>
		<property name="output" value="output" />
		<property name="src" value="src" />
		<property name="resourceIn" value="${src}/resources" />
		<property name="tmp" value="${output}/tmp" /> 
		<property name="doc" value="${output}/docs" />
		<property name="resourceOut" value="${tmp}/resources" />
		<property name="version" value="0.3.4" />
		
		<mkdir dir="${output}" />
		<mkdir dir="${tmp}" />
		<mkdir dir="${doc}" />
		<mkdir dir="${resourceOut}" />
	</target>

	<target name="clean" depends="init">
		<delete dir="${output}/*"/>
		<delete dir="${tmp}/*"/>
		<delete dir="${resourceOut}/*"/>
		<delete dir="${doc}/*"/>
	</target>

	<target name="compile" depends="init">
		<javac srcdir="${src}" destdir="${tmp}"/>
		<copy todir="${resourceOut}">
			<fileset dir="${resourceIn}" />
		</copy>
		<!-- CVS won't allow us to check in a DLL, so we've renamed it RubberBand.gif.         -->
		<!-- We need to copy to the output directory and rename back to DLL during the build.  -->		
		<copy file="${src}/org/flexdock/docking/drag/outline/win32/RubberBand.gif" 
		      tofile="${tmp}/org/flexdock/docking/drag/outline/win32/RubberBand.dll"/>
	</target>

	<target name="javadoc" depends="init">
		<javadoc sourcepath="${src}" destdir="${doc}" packagenames="org.flexdock.*"/>
	</target>

	<target name="archive" depends="init, compile">
		<jar jarfile="${output}/${project}-${version}.jar" basedir="${tmp}" />
	</target>

	<target name="clean.compile.archive" depends="clean, compile, archive" />
	
</project>